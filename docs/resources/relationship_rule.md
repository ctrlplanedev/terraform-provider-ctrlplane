---
page_title: "ctrlplane_relationship_rule Resource - ctrlplane"
subcategory: ""
description: |-
  Manages a relationship rule in Ctrlplane. Relationship rules define how entities (resources, deployments, environments) are related to each other.
---

# ctrlplane_relationship_rule (Resource)

Manages a relationship rule in Ctrlplane. Relationship rules define how entities (resources, deployments, environments) are related to each other.

## Example Usage

```terraform
resource "ctrlplane_relationship_rule" "cluster_to_namespace" {
  name              = "Cluster to Namespace"
  reference         = "cluster-to-namespace"
  description       = "Links Kubernetes clusters to their namespaces"
  relationship_type = "associated_with"

  matcher = "from.config.cluster_name == to.config.cluster_name"

  from {
    type     = "resource"
    selector = "resource.kind == 'kubernetes/cluster'"
  }

  to {
    type     = "resource"
    selector = "resource.kind == 'kubernetes/namespace'"
  }

  metadata = {
    managed_by = "terraform"
  }
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

- `matcher` (String) A CEL expression used to match entities for the relationship.
- `name` (String) The name of the relationship rule.
- `reference` (String) A unique reference identifier for the relationship rule. Changing this forces a new resource to be created.
- `relationship_type` (String) The type of relationship (e.g., "depends_on", "associated_with").

### Optional

- `description` (String) A description of the relationship rule.
- `from` (Block) The source side of the relationship (see [below for nested schema](#nestedblock--from)).
- `metadata` (Map of String) Metadata key-value pairs for the relationship rule.
- `to` (Block) The target side of the relationship (see [below for nested schema](#nestedblock--to)).

### Read-Only

- `id` (String) The unique identifier of the relationship rule.

<a id="nestedblock--from"></a>

### Nested Schema for `from`

Required:

- `type` (String) The entity type (one of: `deployment`, `environment`, `resource`).

Optional:

- `selector` (String) A CEL expression to filter entities.

<a id="nestedblock--to"></a>

### Nested Schema for `to`

Required:

- `type` (String) The entity type (one of: `deployment`, `environment`, `resource`).

Optional:

- `selector` (String) A CEL expression to filter entities.

## Import

Import is supported using the following syntax:

```shell
terraform import ctrlplane_relationship_rule.example <relationship-rule-id>
```
