---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ctrlplane_policy Resource - ctrlplane"
subcategory: ""
description: |-
  
---

# ctrlplane_policy (Resource)





<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the policy
- `selector` (String) CEL expression for matching release targets. Use "true" to match all targets.

### Optional

- `any_approval` (Block List) Any approval rules (see [below for nested schema](#nestedblock--any_approval))
- `deployment_dependency` (Block List) Deployment dependency rules (see [below for nested schema](#nestedblock--deployment_dependency))
- `deployment_window` (Block List) Deployment window rules (see [below for nested schema](#nestedblock--deployment_window))
- `description` (String) The description of the policy
- `enabled` (Boolean) Whether the policy is enabled
- `environment_progression` (Block List) Environment progression rules (see [below for nested schema](#nestedblock--environment_progression))
- `gradual_rollout` (Block List) Gradual rollout rules (see [below for nested schema](#nestedblock--gradual_rollout))
- `metadata` (Map of String) The metadata of the policy
- `priority` (Number) The priority of the policy (higher is evaluated first)
- `verification` (Block List) Verification rules (see [below for nested schema](#nestedblock--verification))
- `version_cooldown` (Block List) Version cooldown rules (see [below for nested schema](#nestedblock--version_cooldown))

### Read-Only

- `id` (String) The ID of the policy

<a id="nestedblock--any_approval"></a>
### Nested Schema for `any_approval`

Required:

- `min_approvals` (Number) Minimum number of approvals required

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID


<a id="nestedblock--deployment_dependency"></a>
### Nested Schema for `deployment_dependency`

Required:

- `depends_on_selector` (String) CEL expression to match upstream deployment(s) that must have a successful release before this deployment can proceed

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID


<a id="nestedblock--deployment_window"></a>
### Nested Schema for `deployment_window`

Required:

- `duration_minutes` (Number) Duration of each window in minutes
- `rrule` (String) RFC 5545 recurrence rule for window starts

Optional:

- `allow_window` (Boolean) Allow deployments during the window (deny when false)
- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
- `timezone` (String) IANA timezone for the recurrence rule


<a id="nestedblock--environment_progression"></a>
### Nested Schema for `environment_progression`

Required:

- `depends_on_environment_selector` (String) CEL expression to match the environment that must have a successful release before this environment can proceed

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
- `maximum_age_hours` (Number) Maximum age in hours of dependency deployment before blocking progression
- `minimum_sock_time_minutes` (Number) Minimum time in minutes to wait after the dependency environment is in a success state
- `minimum_success_percentage` (Number) Minimum percentage of successful deployments required


<a id="nestedblock--gradual_rollout"></a>
### Nested Schema for `gradual_rollout`

Required:

- `rollout_type` (String) Rollout strategy: "linear" or "linear-normalized"
- `time_scale_interval` (Number) Base time interval in seconds used to compute delay between deployments

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID


<a id="nestedblock--verification"></a>
### Nested Schema for `verification`

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
- `metric` (Block List) Verification metrics (see [below for nested schema](#nestedblock--verification--metric))
- `trigger_on` (String) When to trigger verification (e.g., "jobSuccess")

<a id="nestedblock--verification--metric"></a>
### Nested Schema for `verification.metric`

Required:

- `count` (Number) Number of measurements to take
- `interval` (String) Interval between measurements (e.g., "30s")
- `name` (String) Metric name

Optional:

- `datadog` (Block, Optional) Datadog metric provider configuration (see [below for nested schema](#nestedblock--verification--metric--datadog))
- `failure` (Block, Optional) Failure condition (see [below for nested schema](#nestedblock--verification--metric--failure))
- `success` (Block, Optional) Success condition (see [below for nested schema](#nestedblock--verification--metric--success))

<a id="nestedblock--verification--metric--datadog"></a>
### Nested Schema for `verification.metric.datadog`

Required:

- `api_key` (String, Sensitive) Datadog API key
- `app_key` (String, Sensitive) Datadog application key
- `queries` (Map of String) Datadog metric queries

Optional:

- `aggregator` (String) Datadog aggregator (e.g., "avg")
- `formula` (String) Datadog formula
- `interval` (String) Provider interval (e.g., "1m")
- `site` (String) Datadog site URL (e.g., us5.datadoghq.com)


<a id="nestedblock--verification--metric--failure"></a>
### Nested Schema for `verification.metric.failure`

Optional:

- `condition` (String) CEL expression to evaluate failure
- `threshold` (Number) Consecutive failures before failing


<a id="nestedblock--verification--metric--success"></a>
### Nested Schema for `verification.metric.success`

Required:

- `condition` (String) CEL expression to evaluate success

Optional:

- `threshold` (Number) Minimum consecutive successes required




<a id="nestedblock--version_cooldown"></a>
### Nested Schema for `version_cooldown`

Required:

- `duration` (String) Minimum duration between deployments (e.g., "1h")

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
