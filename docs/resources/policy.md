---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ctrlplane_policy Resource - ctrlplane"
subcategory: ""
description: |-
  
---

# ctrlplane_policy (Resource)





<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the policy

### Optional

- `deployment_window` (Block List) Deployment window rules (see [below for nested schema](#nestedblock--deployment_window))
- `description` (String) The description of the policy
- `enabled` (Boolean) Whether the policy is enabled
- `metadata` (Map of String) The metadata of the policy
- `priority` (Number) The priority of the policy (higher is evaluated first)
- `selector` (Block List) Selectors for policy targets (see [below for nested schema](#nestedblock--selector))
- `verification` (Block List) Verification rules (see [below for nested schema](#nestedblock--verification))
- `version_cooldown` (Block List) Version cooldown rules (see [below for nested schema](#nestedblock--version_cooldown))

### Read-Only

- `id` (String) The ID of the policy

<a id="nestedblock--deployment_window"></a>
### Nested Schema for `deployment_window`

Required:

- `duration` (String) Duration of each window (e.g., "8h")
- `rrule` (String) RFC 5545 recurrence rule for window starts

Optional:

- `allow_window` (Boolean) Allow deployments during the window (deny when false)
- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
- `timezone` (String) IANA timezone for the recurrence rule


<a id="nestedblock--selector"></a>
### Nested Schema for `selector`

Optional:

- `deployment` (String) CEL selector for deployments
- `environment` (String) CEL selector for environments
- `id` (String) Selector ID
- `resource` (String) CEL selector for resources


<a id="nestedblock--verification"></a>
### Nested Schema for `verification`

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
- `metric` (Block List) Verification metrics (see [below for nested schema](#nestedblock--verification--metric))
- `trigger_on` (String) When to trigger verification (e.g., "jobSuccess")

<a id="nestedblock--verification--metric"></a>
### Nested Schema for `verification.metric`

Required:

- `count` (Number) Number of measurements to take
- `interval` (String) Interval between measurements (e.g., "30s")
- `name` (String) Metric name

Optional:

- `datadog` (Block, Optional) Datadog metric provider configuration (see [below for nested schema](#nestedblock--verification--metric--datadog))
- `failure` (Block, Optional) Failure condition (see [below for nested schema](#nestedblock--verification--metric--failure))
- `success` (Block, Optional) Success condition (see [below for nested schema](#nestedblock--verification--metric--success))

<a id="nestedblock--verification--metric--datadog"></a>
### Nested Schema for `verification.metric.datadog`

Required:

- `api_key` (String, Sensitive) Datadog API key
- `app_key` (String, Sensitive) Datadog application key
- `queries` (Map of String) Datadog metric queries

Optional:

- `aggregator` (String) Datadog aggregator (e.g., "avg")
- `formula` (String) Datadog formula
- `interval` (String) Provider interval (e.g., "1m")
- `site` (String) Datadog site URL (e.g., us5.datadoghq.com)


<a id="nestedblock--verification--metric--failure"></a>
### Nested Schema for `verification.metric.failure`

Optional:

- `condition` (String) CEL expression to evaluate failure
- `threshold` (Number) Consecutive failures before failing


<a id="nestedblock--verification--metric--success"></a>
### Nested Schema for `verification.metric.success`

Required:

- `condition` (String) CEL expression to evaluate success

Optional:

- `threshold` (Number) Minimum consecutive successes required




<a id="nestedblock--version_cooldown"></a>
### Nested Schema for `version_cooldown`

Required:

- `duration` (String) Minimum duration between deployments (e.g., "1h")

Optional:

- `created_at` (String) Rule creation timestamp
- `id` (String) Rule ID
